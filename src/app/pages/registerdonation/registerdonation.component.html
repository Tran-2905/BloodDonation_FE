<div class="container">
    <!-- Registration Form -->
    <section class="py-5 bg-light">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-lg-8">
                    <div class="donation-form">
                        <form (ngSubmit)="onSubmit()" #donationForm="ngForm">
                            <!-- Personal Information -->
                            <div class="form-section">
                                <h5><i class="bi bi-person-fill me-2"></i>Thông tin cá nhân</h5>
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label for="fullName" class="form-label">Họ và tên *</label>
                                        <input type="text" class="form-control" id="fullName" name="fullName"
                                            [(ngModel)]="donationData.fullName" required>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label for="phone" class="form-label">Số điện thoại *</label>
                                        <input type="tel" class="form-control" id="phone" name="phone"
                                            [(ngModel)]="donationData.phone" required>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label for="email" class="form-label">Email</label>
                                        <input type="email" class="form-control" id="email" name="email"
                                            [(ngModel)]="donationData.email">
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label for="birthDate" class="form-label">Ngày sinh *</label>
                                        <input type="date" class="form-control" id="birthDate" name="birthDate"
                                            [(ngModel)]="donationData.birthDate" required>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label for="gender" class="form-label">Giới tính *</label>
                                        <select class="form-select" id="gender" name="gender"
                                            [(ngModel)]="donationData.gender" required>
                                            <option value="">Chọn giới tính</option>
                                            <option value="male">Nam</option>
                                            <option value="female">Nữ</option>
                                            <option value="other">Khác</option>
                                        </select>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label for="bloodType" class="form-label">Nhóm máu *</label>
                                        <select class="form-select" id="bloodType" name="bloodType"
                                            [(ngModel)]="donationData.bloodType" required>
                                            <option value="">Chọn nhóm máu</option>
                                            <option value="A+">A+</option>
                                            <option value="A-">A-</option>
                                            <option value="B+">B+</option>
                                            <option value="B-">B-</option>
                                            <option value="AB+">AB+</option>
                                            <option value="AB-">AB-</option>
                                            <option value="O+">O+</option>
                                            <option value="O-">O-</option>
                                            <option value="unknown">Chưa biết</option>
                                        </select>
                                    </div>
                                </div>
                            </div>

                            <!-- Address Information -->
                            <div class="form-section">
                                <h5><i class="bi bi-geo-alt-fill me-2"></i>Địa chỉ</h5>
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label for="city" class="form-label">Tỉnh/Thành phố *</label>
                                        <select class="form-select" id="city" name="city"
                                            [(ngModel)]="donationData.city" required>
                                            <option value="">Chọn tỉnh/thành phố</option>
                                            <option *ngFor="let city of cities" [value]="city">{{ city }}</option>
                                        </select>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label for="district" class="form-label">Quận/Huyện *</label>
                                        <input type="text" class="form-control" id="district" name="district"
                                            [(ngModel)]="donationData.district" required>
                                    </div>
                                </div>
                                <div class="mb-3">
                                    <label for="address" class="form-label">Địa chỉ cụ thể</label>
                                    <textarea class="form-control" id="address" name="address" rows="3"
                                        [(ngModel)]="donationData.address"
                                        placeholder="Số nhà, tên đường, phường/xã..."></textarea>
                                </div>
                            </div>

                            <!-- Health Information -->
                            <div class="form-section">
                                <h5><i class="bi bi-heart-pulse me-2"></i>Thông tin sức khỏe</h5>
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label for="weight" class="form-label">Cân nặng (kg) *</label>
                                        <input type="number" class="form-control" id="weight" name="weight"
                                            [(ngModel)]="donationData.weight" min="45" required>
                                        <small class="text-muted">Tối thiểu 45kg</small>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label for="height" class="form-label">Chiều cao (cm)</label>
                                        <input type="number" class="form-control" id="height" name="height"
                                            [(ngModel)]="donationData.height" min="140">
                                    </div>
                                </div>
                                <div class="mb-3">
                                    <label for="lastDonation" class="form-label">Lần hiến máu cuối cùng</label>
                                    <input type="date" class="form-control" id="lastDonation" name="lastDonation"
                                        [(ngModel)]="donationData.lastDonation">
                                    <small class="text-muted">Để trống nếu chưa từng hiến máu</small>
                                </div>
                            </div>

                            <!-- Preferred Donation -->
                            <div class="form-section">
                                <h5><i class="bi bi-calendar-check me-2"></i>Thông tin hiến máu</h5>
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label for="preferredDate" class="form-label">Ngày hiến máu mong muốn</label>
                                        <input type="date" class="form-control" id="preferredDate" name="preferredDate"
                                            [(ngModel)]="donationData.preferredDate" [min]="minDate">
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label for="preferredTime" class="form-label">Khung giờ mong muốn</label>
                                        <select class="form-select" id="preferredTime" name="preferredTime"
                                            [(ngModel)]="donationData.preferredTime">
                                            <option value="">Chọn khung giờ</option>
                                            <option value="morning">Sáng (8:00 - 12:00)</option>
                                            <option value="afternoon">Chiều (13:00 - 17:00)</option>
                                            <option value="evening">Tối (18:00 - 20:00)</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="mb-3">
                                    <label for="donationCenter" class="form-label">Trung tâm hiến máu</label>
                                    <select class="form-select" id="donationCenter" name="donationCenter"
                                        [(ngModel)]="donationData.donationCenter">
                                        <option value="">Chọn trung tâm</option>
                                        <option *ngFor="let center of donationCenters" [value]="center.id">
                                            {{ center.name }} - {{ center.address }}
                                        </option>
                                    </select>
                                </div>
                                <div class="mb-3">
                                    <label for="notes" class="form-label">Ghi chú</label>
                                    <textarea class="form-control" id="notes" name="notes" rows="3"
                                        [(ngModel)]="donationData.notes"
                                        placeholder="Thông tin bổ sung (nếu có)..."></textarea>
                                </div>
                            </div>

                            <!-- Health Questionnaire -->
                            <div class="form-section">
                                <h5><i class="bi bi-clipboard-check me-2"></i>Câu hỏi sức khỏe</h5>
                                <div class="alert alert-info">
                                    <i class="bi bi-info-circle me-2"></i>
                                    Vui lòng trả lời trung thực các câu hỏi sau để đảm bảo an toàn cho bạn và người nhận
                                    máu
                                </div>

                                <div class="health-questions">
                                    <div class="mb-3" *ngFor="let question of healthQuestions">
                                        <div class="card">
                                            <div class="card-body">
                                                <p class="mb-2">{{ question.question }}</p>
                                                <div class="form-check form-check-inline">
                                                    <input class="form-check-input" type="radio"
                                                        [name]="'question_' + question.id"
                                                        [id]="'question_' + question.id + '_yes'" value="yes"
                                                        [(ngModel)]="donationData.healthAnswers[question.id]">
                                                    <label class="form-check-label"
                                                        [for]="'question_' + question.id + '_yes'">
                                                        Có
                                                    </label>
                                                </div>
                                                <div class="form-check form-check-inline">
                                                    <input class="form-check-input" type="radio"
                                                        [name]="'question_' + question.id"
                                                        [id]="'question_' + question.id + '_no'" value="no"
                                                        [(ngModel)]="donationData.healthAnswers[question.id]">
                                                    <label class="form-check-label"
                                                        [for]="'question_' + question.id + '_no'">
                                                        Không
                                                    </label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Agreement -->
                            <div class="form-section">
                                <div class="card">
                                    <div class="card-body">
                                        <div class="form-check mb-3">
                                            <input class="form-check-input" type="checkbox" id="agreeTerms"
                                                [(ngModel)]="donationData.agreeTerms" name="agreeTerms" required>
                                            <label class="form-check-label" for="agreeTerms">
                                                Tôi đồng ý với các <a href="#" class="text-danger">điều khoản và điều
                                                    kiện</a> của chương trình hiến máu
                                            </label>
                                        </div>
                                        <div class="form-check mb-3">
                                            <input class="form-check-input" type="checkbox" id="agreeContact"
                                                [(ngModel)]="donationData.agreeContact" name="agreeContact">
                                            <label class="form-check-label" for="agreeContact">
                                                Tôi đồng ý nhận thông tin liên lạc về các chương trình hiến máu trong
                                                tương lai
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Submit Button -->
                            <div class="text-center">
                                <button type="submit" class="btn btn-gradient btn-lg px-5"
                                    [disabled]="!donationForm.valid">
                                    <i class="bi bi-heart-fill me-2"></i>
                                    Đăng ký hiến máu
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </section>
</div>